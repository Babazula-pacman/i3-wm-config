# Read `man 5 sway` for a complete reference.

# Set mod key (Mod1=<Alt>, Mod4=<Super>)
set $mod Mod4

# Home row direction keys, like vim
set $left h
set $down j
set $up k
set $right l

# Your preferred terminal emulator
set $term urxvt

# Your preferred application launcher
# Note: it's recommended that you pass the final command to sway
set $menu dmenu_path | dmenu | xargs swaymsg exec --

# Default wallpaper (more resolutions are available in /usr/share/backgrounds/sway/)
output * bg /usr/share/backgrounds/sway/Sway_Wallpaper_Blue_1920x1080.png fill

# You can get the names of your inputs by running: swaymsg -t get_inputs
# Read `man 5 sway-input` for more information about this section.
input "type:touchpad" {
    dwt enabled
    tap enabled
    natural_scroll enabled
    middle_emulation enabled
}

# Set key folder paths
set $i3path ~/.config/sway
set $i3multipath ~/.config/sway/i3_wm_multi_disp_scripts

# set default desktop layout (default is tiling)
workspace_layout stacking

default_border pixel 1

# Hides vertical and horizontal borders when there's only one window.
hide_edge_borders none

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
# font xft:URWGothic-Book 11
font pango: Source Code Pro 10

# Use Mouse+$mod to drag floating windows
floating_modifier $mod

# This option determines what to do when attempting to focus over the edge of a container. If set to no, the focused container will retain focus, if there are no other containers in the direction. If set to yes, focus will be wrapped to the opposite edge of the container, if there are no other containers in the direction. If set to force, focus will be wrapped to the opposite edge of the container, even if there are other containers in the direction. Default is yes.
focus_wrapping yes

# Assume you are on workspace "1: www" and switch to "2: IM" using mod+2 
# because somebody sent you a message. You donâ€™t need to remember 
# where you came from now, you can just press $mod+2 again to switch back to "1: www".
workspace_auto_back_and_forth yes

# turn on mouse following
focus_follows_mouse yes

# start a terminal
bindsym $mod+Return exec $term

# kill focused window
bindsym $mod+q kill

################################################################################################
## sound-section - DO NOT EDIT if you wish to automatically upgrade Alsa -> Pulseaudio later! ##
################################################################################################

# exec --no-startup-id volumeicon
# bindsym $mod+Ctrl+m exec terminal -e 'alsamixer'
#exec --no-startup-id pulseaudio
#exec --no-startup-id pa-applet
#bindsym $mod+Ctrl+m exec pavucontrol

################################################################################################


# move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right


# Set shut down, restart and locking features
bindsym $mod+minus mode "$mode_system"
set $mode_system (l)ock, (e)xit, switch_(u)ser, (s)uspend, (h)ibernate, (r)eboot, (Shift+s)hutdown
mode "$mode_system" {
    bindsym l exec --no-startup-id i3exit lock, mode "default"
    bindsym s exec --no-startup-id i3exit suspend, mode "default"
    bindsym u exec --no-startup-id i3exit switch_user, mode "default"
    bindsym e exec --no-startup-id i3exit logout, mode "default"
    bindsym h exec --no-startup-id i3exit hibernate, mode "default"
    bindsym r exec --no-startup-id i3exit reboot, mode "default"
    bindsym Shift+s exec --no-startup-id i3exit shutdown, mode "default"

    # exit system mode: "Enter" or "Escape"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# resize window (you can also use the mouse for that)
mode "resize" {
    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"

    bindsym Left   resize shrink width  5 px or 5 ppt
    bindsym Down   resize shrink height 5 px or 5 ppt
    bindsym Up     resize grow height   5 px or 5 ppt
    bindsym Right  resize grow width    5 px or 5 ppt

    bindsym h  resize shrink width  1 px or 1 ppt
    bindsym j  resize shrink height 1 px or 1 ppt
    bindsym k  resize grow height   1 px or 1 ppt
    bindsym l  resize grow width    1 px or 1 ppt
}

# focus the parent container
bindsym $mod+a focus parent
# focus the child container
bindsym $mod+d focus child
# change container layout 
bindsym $mod+e layout toggle all
# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen
# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right
# split in horizontal orientation
bindsym $mod+t split h;exec notify-send 'tile horizontally'
# Resize mode
bindsym $mod+r mode "resize"
# toggle touchpad
bindsym $mod+s exec $i3path/utils/touchpad_toggle.sh
# small window for videos
bindsym $mod+u fullscreen disable; floating enable; resize set 800 450; sticky enable; move position 870 25
# split in vertical orientation
bindsym $mod+y split v;exec notify-send 'tile vertically'
# Toggle border
bindsym $mod+x border toggle
# Show the first scratchpad window
bindsym $mod+z scratchpad show
# Lock the system
# bindsym $mod+q exec i3lock -i $i3path/i3-lock-screen.png -t -f
# bindsym $mod+q exec --no-startup-id blurlock

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# switch to workspace
bindsym $mod+KP_1 workspace number 1
bindsym $mod+KP_2 workspace number 2
bindsym $mod+KP_3 workspace number 3
bindsym $mod+KP_4 workspace number 4
bindsym $mod+KP_5 workspace number 5
bindsym $mod+KP_6 workspace number 6
bindsym $mod+KP_7 workspace number 7
bindsym $mod+KP_8 workspace number 8
bindsym $mod+KP_9 workspace number 9
bindsym $mod+KP_0 workspace number 0
bindsym $mod+1    workspace number 1
bindsym $mod+2    workspace number 2
bindsym $mod+3    workspace number 3
bindsym $mod+4    workspace number 4
bindsym $mod+5    workspace number 5
bindsym $mod+6    workspace number 6
bindsym $mod+7    workspace number 7
bindsym $mod+8    workspace number 8
bindsym $mod+9    workspace number 9
bindsym $mod+0    workspace number 0

# move focused container to workspace
bindsym $mod+Shift+KP_1 move container to workspace number 1
bindsym $mod+Shift+KP_2 move container to workspace number 2
bindsym $mod+Shift+KP_3 move container to workspace number 3
bindsym $mod+Shift+KP_4 move container to workspace number 4
bindsym $mod+Shift+KP_5 move container to workspace number 5
bindsym $mod+Shift+KP_6 move container to workspace number 6
bindsym $mod+Shift+KP_7 move container to workspace number 7
bindsym $mod+Shift+KP_8 move container to workspace number 8
bindsym $mod+Shift+KP_9 move container to workspace number 8
bindsym $mod+Shift+KP_0 move container to workspace number 8
bindsym $mod+Shift+1    move container to workspace number 1
bindsym $mod+Shift+2    move container to workspace number 2
bindsym $mod+Shift+3    move container to workspace number 3
bindsym $mod+Shift+4    move container to workspace number 4
bindsym $mod+Shift+5    move container to workspace number 5
bindsym $mod+Shift+6    move container to workspace number 6
bindsym $mod+Shift+7    move container to workspace number 7
bindsym $mod+Shift+8    move container to workspace number 8
bindsym $mod+Shift+9    move container to workspace number 9
bindsym $mod+Shift+0    move container to workspace number 0

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r reload

# exit i3 (logs you out of your X session)
# bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

# hide/unhide i3status bar
# bindsym $mod+m bar mode toggle

# Make the currently focused window a scratchpad
bindsym $mod+Shift+z move scratchpad

# multi display workflow scripts
bindsym $mod+Shift+p         exec $i3multipath/.env/bin/python $i3multipath/create_new_project.py
bindsym $mod+p               exec $i3multipath/.env/bin/python $i3multipath/switch_to_next_project.py
bindsym $mod+Shift+Tab       exec $i3multipath/.env/bin/python $i3multipath/move_workspaces_in_project_to_next_output.py
bindsym $mod+Control+Tab     exec $i3multipath/.env/bin/python $i3multipath/move_current_container_to_next_workspace_in_project.py
bindsym $mod+o               exec $i3multipath/.env/bin/python $i3multipath/rename_project.py
bindsym F8                   exec $i3multipath/.env/bin/python $i3multipath/bring_container_to_current_workspace.py
bindsym $mod+Tab             exec $i3multipath/switcher.sh

# rofi bindings
bindsym F7 exec "rofi -show-icons -modi combi -show combi -combi-modi drun,run"
bindsym F12 exec  rofi -show-icons -show window

# launch categorized menu
# bindsym F10 exec --no-startup-id morc_menu

# volume
bindsym XF86AudioLowerVolume exec ~/.i3/utils/volume_decrease.sh
bindsym XF86AudioRaiseVolume exec ~/.i3/utils/volume_increase.sh
bindsym XF86AudioMute exec ~/.i3/utils/volume_mute.sh

# music
# bindsym XF86AudioPlay exec playerctl 'play-pause'
# bindsym XF86AudioNext exec playerctl next
# bindsym XF86AudioPrev exec playerctl previous

# brightness
bindsym XF86MonBrightnessDown exec $i3path/utils/brightness_decrease.sh
bindsym XF86MonBrightnessUp exec $i3path/utils/brightness_increase.sh
bindsym Shift+XF86MonBrightnessUp exec $i3path/utils/brightness_gui.sh
bindsym Shift+XF86MonBrightnessDown exec $i3path/utils/brightness_gui.sh

popup_during_fullscreen leave_fullscreen
show_marks yes

for_window [class="^.*"] border pixel 2

# Disable floating for nemo windows
for_window [class="Nemo" instance="^desktop_window$"] floating disable

# chrome extension popups
for_window [instance="^crx.*$" window_role="pop-up"]  floating enable
for_window [instance="^crx.*$" window_role="pop-up"]  sticky   enable

# Open specific applications in floating mode
for_window [title="alsamixer"] floating enable border pixel 1
for_window [class="calamares"] floating enable border normal
for_window [class="Clipgrab"] floating enable
for_window [title="File Transfer*"] floating enable
for_window [class="Galculator"] floating enable border pixel 1
for_window [class="GParted"] floating enable border normal
for_window [title="i3_help"] floating enable sticky enable border normal
for_window [class="Lightdm-settings"] floating enable
for_window [class="Lxappearance"] floating enable sticky enable border normal
for_window [class="Manjaro-hello"] floating enable
for_window [class="Manjaro Settings Manager"] floating enable border normal
for_window [title="MuseScore: Play Panel"] floating enable
for_window [class="Nitrogen"] floating enable sticky enable border normal
for_window [class="Oblogout"] fullscreen enable
for_window [class="octopi"] floating enable
for_window [title="About Pale Moon"] floating enable
#for_window [class="Pamac-manager"] floating enable
for_window [class="Pavucontrol"] floating enable
for_window [class="qt5ct"] floating enable sticky enable border normal
for_window [class="Qtconfig-qt4"] floating enable sticky enable border normal
for_window [class="Simple-scan"] floating enable border normal
for_window [class="(?i)System-config-printer.py"] floating enable border normal
for_window [class="Skype"] floating enable border normal
for_window [class="Timeset-gui"] floating enable border normal
for_window [class="(?i)virtualbox"] floating enable border normal
for_window [class="Xfburn"] floating enable

# Prepend title with program name
for_window [class=".*"] title_format "%class - %title"

# switch to workspace with urgent window automatically
for_window [urgent=latest] focus

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
bar {
    status_command py3status -c $i3path/i3status.conf

    position top
    colors {
        background #222222
        statusline #dddddd
        separator  #666666

        focused_workspace  #0088CC #0088CC #ffffff
        active_workspace   #333333 #333333 #ffffff
        inactive_workspace #333333 #333333 #888888
        urgent_workspace   #2f343a #900000 #ffffff
    }
}

# Theme colors
# class                   border  backgr. text    indic.   child_border
# client.focused #0088CC #0088CC #ffffff #dddddd
# client.focused_inactive #333333 #333333 #888888 #292d2e
# client.unfocused #333333 #333333 #888888 #292d2e
# client.urgent #2f343a #900000 #ffffff #900000
# client.placeholder        #000000 #0c0c0c #ffffff #000000 
# client.background         #2B2C2B

#############################
### settings for i3-gaps: ###
#############################

# Set inner/outer gaps
# gaps inner 5
# gaps outer -2

# Additionally, you can issue commands with the following syntax. This is useful to bind keys to changing the gap size.
# gaps inner|outer current|all set|plus|minus <px>
# gaps inner all set 10
# gaps outer all plus 5

# Smart gaps (gaps used if only more than one container on the workspace)
smart_gaps on

# Smart borders (draw borders around container only if it is not the only container on this workspace) 
# on|no_gaps (on=always activate and no_gaps=only activate if the gap size to the edge of the screen is 0)
smart_borders on

# Press $mod+Shift+g to enter the gap mode. Choose o or i for modifying outer/inner gaps. Press one of + / - (in-/decrement for current workspace) or 0 (remove gaps for current workspace). If you also press Shift with these keys, the change will be global for all workspaces.
set $mode_gaps Gaps: (o) outer, (i) inner
set $mode_gaps_outer Outer Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_inner Inner Gaps: +|-|0 (local), Shift + +|-|0 (global)
# bindsym $mod+Shift+g mode "$mode_gaps"

mode "$mode_gaps" {
        bindsym o      mode "$mode_gaps_outer"
        bindsym i      mode "$mode_gaps_inner"
        bindsym Return mode "default"
        bindsym Escape mode "default"
}
mode "$mode_gaps_inner" {
        bindsym plus  gaps inner current plus 5
        bindsym minus gaps inner current minus 5
        bindsym 0     gaps inner current set 0

        bindsym Shift+plus  gaps inner all plus 5
        bindsym Shift+minus gaps inner all minus 5
        bindsym Shift+0     gaps inner all set 0

        bindsym Return mode "default"
        bindsym Escape mode "default"
}
mode "$mode_gaps_outer" {
        bindsym plus  gaps outer current plus 5
        bindsym minus gaps outer current minus 5
        bindsym 0     gaps outer current set 0

        bindsym Shift+plus  gaps outer all plus 5
        bindsym Shift+minus gaps outer all minus 5
        bindsym Shift+0     gaps outer all set 0

        bindsym Return mode "default"
        bindsym Escape mode "default"
}


#############################
## Autostart applications ###
#############################
exec xrdb ~/.Xresources
exec mako

# create initial workspaces
exec --no-startup-id $i3multipath/.env/bin/python $i3multipath/create_new_project.py main

exec --no-startup-id /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
# exec --no-startup-id nitrogen --restore ; sleep 1; compton -b
exec --no-startup-id xfce4-power-manager
exec --no-startup-id pamac-tray
# exec_always --no-startup-id fix_xcursor
exec --no-startup-id nm-applet
exec --no-startup-id dropbox start
exec --no-startup-id insync start

# start a terminal in scratchpad
# for_window [instance="__scratchpad"] move scratchpad 
# for_window [instance="__scratchpad"] resize set 800 300
# exec --no-startup-id urxvt -name __scratchpad

for_window [instance="dropdownTerminal"] floating enable
for_window [instance="dropdownTerminal"] resize set 1500 900
for_window [instance="dropdownTerminal"] border none 
for_window [instance="dropdownTerminal"] move position center 
for_window [instance="dropdownTerminal"] move scratchpad
exec --no-startup-id urxvt -bg rgba:0000/0000/0000/c800 --depth 32 -pe tabbed -name dropdownTerminal
# exec --no-startup-id urxvt -name dropdownTerminal 
# bindsym $mod+grave [instance="dropdownTerminal"] scratchpad show; move position center

include /etc/sway/config.d/*
